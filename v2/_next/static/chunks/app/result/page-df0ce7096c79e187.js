(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[834],{65:(e,t,o)=>{"use strict";o.d(t,{default:()=>d});var r=o(5155),n=o(2115),a=o(6874),s=o.n(a),l=o(5347),i=o(6516),c=o(3540);function d(){let[e,t]=(0,n.useState)(!1),o=async()=>{try{navigator.share?await navigator.share({title:"PaywallFree - Read Articles Without Paywalls",text:"I found something interesting for you.",url:window.location.href}):(await navigator.clipboard.writeText(window.location.href),t(!0),setTimeout(()=>t(!1),3e3))}catch(e){console.error("Error sharing:",e)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-all duration-300 ".concat(e?"opacity-100 translate-y-0":"opacity-0 -translate-y-10"),children:"Link copied to clipboard!"}),(0,r.jsx)("nav",{className:"fixed w-full backdrop-blur-md bg-white/80 dark:bg-gray-900/80 z-40 border-b border-gray-200 dark:border-gray-800 transition-all duration-300",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)(s(),{href:"/",className:"flex items-center space-x-2 group",children:[(0,r.jsx)("div",{className:"p-2 bg-primary/10 rounded-full transition-all duration-300 group-hover:bg-primary/20",children:(0,r.jsx)(l.A,{className:"h-6 w-6 text-primary"})}),(0,r.jsx)("span",{className:"text-xl font-medium tracking-tight",children:"PaywallFree"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(c.A,{}),(0,r.jsx)("button",{onClick:o,className:"p-2.5 rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"Share",children:(0,r.jsx)(i.A,{className:"h-5 w-5"})})]})]})})})]})}},3540:(e,t,o)=>{"use strict";o.d(t,{A:()=>i});var r=o(5155),n=o(2115),a=o(2098),s=o(3509),l=o(1362);function i(){let[e,t]=(0,n.useState)(!1),{theme:o,setTheme:i}=(0,l.D)();return((0,n.useEffect)(()=>{t(!0)},[]),e)?(0,r.jsx)("button",{onClick:()=>{i("dark"===o?"light":"dark")},className:"p-2.5 rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"Toggle theme",children:"dark"===o?(0,r.jsx)(a.A,{className:"h-5 w-5"}):(0,r.jsx)(s.A,{className:"h-5 w-5"})}):null}},4335:(e,t,o)=>{"use strict";o.d(t,{default:()=>h});var r=o(5155),n=o(2115);let a=async(e,t)=>{switch(sessionStorage.setItem("sessionUrl",t),sessionStorage.setItem("selectedMode",e),console.log("This is stored: ",e),e){case"automatic_mode":await c(t);return;case"remove_paywall_1":await s("https://archive.is/newest/",t,e);return;case"remove_paywall_2":await l("https://web.archive.org/",t,e);return;default:console.error("Unknown mode:",e),window.location.href="*"}},s=async(e,t,o)=>{let r=performance.now();try{console.log("Sending Request:",e+t);let o=await fetch(e+t,{method:"GET"});if(o.ok){let n=await o.text();console.log("HTML Content:",n);let a=new DOMParser().parseFromString(n,"text/html"),s=new URL(e+t).origin;a.querySelectorAll("img").forEach(e=>{let t=e.getAttribute("src");t&&!t.startsWith("http")&&e.setAttribute("src",s+t)}),n=a.documentElement.outerHTML,sessionStorage.setItem("htmlContent",n);let l=performance.now();console.log("\uD83D\uDE80 Total Execution Time: ".concat((l-r).toFixed(2),"ms"))}else 404===o.status?(window.location.href="*",console.log("404 Error")):console.log("Failed to fetch the page. Status:",o.status)}catch(n){console.error("Error fetching the URL:",n),sessionStorage.setItem("htmlContent",'	<style>\n	    body { background-color: white !important; color: black !important; }\n	    iframe { background-color: white !important; }\n	  </style>\n	<iframe src="'.concat(e+t,'" style="width: 100%; height: 100vh; border: none, background: white;"></iframe>'));let o=performance.now();console.log("\uD83D\uDE80 Total Execution Time: ".concat((o-r).toFixed(2),"ms"))}},l=async(e,t,o)=>{performance.now();let r="https://archive.org/wayback/available?url=",n=await fetch(r+t,{method:"GET"});if(n.ok){var a,s;let e,t;try{e=await n.json(),console.log("json: ",e)}catch(e){throw console.error("❌ ".concat(r," JSON parsing error: ").concat(e.message)),Error("Failed to parse JSON from ".concat(r))}let o=null==e||null==(s=e.archived_snapshots)||null==(a=s.closest)?void 0:a.url;if(console.log("uriList :",o),"string"==typeof o&&o?t=o:(console.log("URL is empty"),window.location.href="*"),t){console.log("✅ Fallback URI found via ".concat(r,": ").concat(t)),console.log("URL: ",t);let e='	<style>\n			    body { background-color: white !important; color: black !important; }\n			    iframe { background-color: white !important; }\n			  </style>\n			<iframe src="'.concat(t,'" style="width: 100%; height: 100vh; border: none, background: white;"></iframe>');return sessionStorage.setItem("htmlContent",e),null}console.warn("\uD83D\uDFE1 ".concat(r," succeeded, but no suitable fallback URI found in JSON."))}else throw console.warn("❌ ".concat(r," failed with status: ").concat(n.status)),Error("".concat(r," request failed with status ").concat(n.status))},i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e4,r=new AbortController,n=setTimeout(()=>{console.warn("[Timeout] Request timed out after ".concat(o,"ms: ").concat(e)),r.abort()},o);try{let o=r.signal;if(t.signal){let e=t.signal,n=()=>r.abort("Aborted by external signal");e.addEventListener("abort",n,{once:!0}),e.aborted&&r.abort(),o.addEventListener("abort",()=>e.removeEventListener("abort",n),{once:!0})}return await fetch(e,{...t,signal:o})}catch(t){if(t instanceof DOMException&&"AbortError"===t.name&&void 0===r.signal.reason)throw console.error("[Timeout] Fetch aborted due to timeout: ".concat(e)),Error("Request timed out: ".concat(e));throw t}finally{clearTimeout(n)}},c=async e=>{console.log("[Handler] Processing path: ".concat(e));let t="https://archive.is/newest/";console.log("Base URL: ",t.slice(0,15));let o="https://archive.org/wayback/available?url=",r=new AbortController,n=i(t+e,{method:"GET"}),a=i(o+e,{method:"GET",signal:r.signal}),s=!0;try{console.log("[Handler] Awaiting ".concat(t,"..."));let a=await n;if(a.ok){console.log("✅ ".concat(t," succeeded. Aborting ").concat(o,"...")),r.abort();let n=await a.text();console.log("[Handler] Stored HTML from ".concat(t));let l=new DOMParser().parseFromString(n,"text/html"),i=new URL(t+e).origin;return l.querySelectorAll("img").forEach(e=>{let t=e.getAttribute("src");t&&!t.startsWith("http")&&e.setAttribute("src",i+t)}),n=l.documentElement.outerHTML,sessionStorage.setItem("htmlContent",n),s=!1,performance.now(),null}console.warn("\uD83D\uDFE1 ".concat(t," failed with status: ").concat(a.status,". Proceeding to ").concat(o,"..."))}catch(e){console.warn("❌ ".concat(t," fetch error: ").concat(e.message,". Proceeding to ").concat(o,"..."))}if(s)try{console.log("[Handler] Awaiting ".concat(o,"..."));let e=await a;if(console.log("res2: ",e),e.ok){var l,c;let r,n;try{r=await e.json(),console.log("json: ",r)}catch(e){throw console.error("❌ ".concat(o," JSON parsing error: ").concat(e.message)),Error("Failed to parse JSON from ".concat(o))}let a=null==r||null==(c=r.archived_snapshots)||null==(l=c.closest)?void 0:l.url;if(console.log("uriList :",a),Array.isArray(a)?n=a.find(e=>{let o="string"==typeof e?e:null==e?void 0:e.uri;return"string"==typeof o&&!o.startsWith(t)}):"string"==typeof a&&a&&(n=a),n){console.log("✅ Fallback URI found via ".concat(o,": ").concat(n)),console.log("URL: ",n);let e='	<style>\n					    body { background-color: white !important; color: black !important; }\n					    iframe { background-color: white !important; }\n					  </style>\n					<iframe src="'.concat(n,'" style="width: 100%; height: 100vh; border: none, background: white;"></iframe>');return s=!1,sessionStorage.setItem("htmlContent",e),null}console.warn("\uD83D\uDFE1 ".concat(o," succeeded, but no suitable fallback URI found in JSON."))}else throw console.warn("❌ ".concat(o," failed with status: ").concat(e.status)),Error("".concat(o," request failed with status ").concat(e.status))}catch(e){e instanceof DOMException&&"AbortError"===e.name&&r.signal.aborted?console.log("[Handler] ".concat(o," fetch correctly aborted as ").concat(t," succeeded.")):console.error("❌ ".concat(o," fetch/processing error: ").concat(e.message))}return console.error("[Handler] Both primary and fallback strategies failed."),window.location.href="*",null};var d=o(5695),g=o(6362);function u(){return(0,r.jsx)("div",{className:"min-h-screen w-full relative overflow-hidden bg-white dark:bg-gray-900 p-6 md:p-8",children:(0,r.jsx)("div",{className:"max-w-3xl mx-auto",children:(0,r.jsxs)("div",{className:"space-y-5 animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 rounded bg-gray-200 dark:bg-gray-700 w-3/4 mb-6"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"h-4 rounded bg-gray-200 dark:bg-gray-700 w-full"}),(0,r.jsx)("div",{className:"h-4 rounded bg-gray-200 dark:bg-gray-700 w-5/6"}),(0,r.jsx)("div",{className:"h-4 rounded bg-gray-200 dark:bg-gray-700 w-full"}),(0,r.jsx)("div",{className:"h-4 rounded bg-gray-200 dark:bg-gray-700 w-full"}),(0,r.jsx)("div",{className:"h-4 rounded bg-gray-200 dark:bg-gray-700 w-3/4"}),(0,r.jsx)("div",{className:"h-4 rounded bg-gray-200 dark:bg-gray-700 w-full"}),(0,r.jsx)("div",{className:"h-4 rounded bg-gray-200 dark:bg-gray-700 w-5/6"}),(0,r.jsx)("div",{className:"h-4 rounded bg-gray-200 dark:bg-gray-700 w-full"}),(0,r.jsx)("div",{className:"h-4 rounded bg-gray-200 dark:bg-gray-700 w-1/2"})]})]})})})}let h=()=>{let[e,t]=(0,n.useState)(""),[o,s]=(0,n.useState)(!0),l=(0,n.useRef)(null),i=(0,n.useRef)(!1),c=(0,n.useRef)(!1),h=(0,d.useSearchParams)();return(0,n.useEffect)(()=>{if(console.log("hasRun: ",i),console.log("triggeredBySubmit: ",g.v),i.current&&!g.v)return;i.current=!0,(0,g.D)(!1),c.current=!1,console.log("useEffect running once!"),s(!0);let e=new URLSearchParams(window.location.search),o=e.get("url"),r=e.get("mode"),n=sessionStorage.getItem("htmlContent"),l=sessionStorage.getItem("sessionUrl"),d=sessionStorage.getItem("selectedMode");console.log("urlParam:",o),console.log("modeParam:",r),console.log("storedUrl:",l),console.log("storedMode:",d),(async()=>{if(n&&o===l&&r===d)t(n),s(!1);else if(o&&r){await a(r,o);let e=sessionStorage.getItem("htmlContent");e&&(t(e),s(!1),console.log("Zoom level:",window.devicePixelRatio),console.log("Viewport width:",window.innerWidth),console.log("Viewport height:",window.innerHeight))}else s(!1),console.error("No HTML content found in sessionStorage.")})();let u=e=>{e.preventDefault()};return document.addEventListener("contextmenu",u),()=>{document.removeEventListener("contextmenu",u)}},[h]),(0,r.jsx)("div",{className:"min-h-screen bg-background text-foreground",children:(0,r.jsx)("div",{id:"content",className:"pb-28",ref:l,children:o?(0,r.jsx)(u,{}):e&&(0,r.jsx)("div",{dangerouslySetInnerHTML:{__html:e},className:"article-content"})})})}},6362:(e,t,o)=>{"use strict";o.d(t,{D:()=>n,v:()=>r});let r=!1,n=e=>{r=e}},8551:(e,t,o)=>{Promise.resolve().then(o.bind(o,9125)),Promise.resolve().then(o.bind(o,65)),Promise.resolve().then(o.bind(o,4335))},9125:(e,t,o)=>{"use strict";o.d(t,{default:()=>b});var r=o(5155),n=o(2115),a=o(5695),s=o(2596),l=o(9688);function i(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return(0,l.QP)((0,s.$)(t))}let c=n.forwardRef((e,t)=>{let{className:o,type:n,...a}=e;return(0,r.jsx)("input",{type:n,className:i("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",o),ref:t,...a})});c.displayName="Input";var d=o(4624);let g=(0,o(2085).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=n.forwardRef((e,t)=>{let{className:o,variant:n,size:a,asChild:s=!1,...l}=e,c=s?d.DX:"button";return(0,r.jsx)(c,{className:i(g({variant:n,size:a,className:o})),ref:t,...l})});u.displayName="Button";var h=o(6874),m=o.n(h),f=o(6362);let p={modeSelector:{position:"fixed",bottom:0,left:0,width:"100%",transition:"all 0.3s ease",height:"10vh",display:"flex",flexDirection:"column",zIndex:998,cursor:"default"},modeSelectorCollapsed:{height:"3vh",cursor:"pointer"},toggleArrow:{position:"absolute",left:"2.5%",transform:"translateX(-50%)",top:"-24px",background:"white",border:"1px solid #e5e7eb",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:997,transition:"all 0.3s ease"},toggleArrowDark:{background:"#1f2937",borderColor:"#374151"},toggleArrowSvg:{transform:"rotate(180deg)",transition:"transform 0.3s ease"},toggleArrowSvgCollapsed:{transform:"rotate(0deg)"},formContainer:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 20px"},formGroup:{display:"flex",gap:"10px",width:"100%",alignItems:"center",justifyContent:"center"},collapsedHint:{display:"none",height:"100%",alignItems:"center",justifyContent:"center",textAlign:"center",padding:"0 20px"},collapsedHintVisible:{display:"flex"},formContainerHidden:{display:"none"},buyMeCoffee:{position:"fixed",bottom:"50px",right:"5px",zIndex:999,transition:"all 0.3s ease"},buyMeCoffeeCollapsed:{bottom:"20px"}},b=()=>{let[e,t]=(0,n.useState)(!1),[o,s]=(0,n.useState)(""),[l,i]=(0,n.useState)("automatic_mode"),[d,g]=(0,n.useState)(!1),h=window.innerWidth<=768,b=(0,n.useRef)(null),w=(0,n.useRef)(null),y=(0,n.useRef)(null),x=(0,n.useRef)(!1),v=(0,a.useRouter)();(0,n.useEffect)(()=>{let e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;e?(document.documentElement.classList.toggle("dark","dark"===e),g("dark"===e)):(document.documentElement.classList.toggle("dark",t),g(t));let o=new URLSearchParams(window.location.search),r=o.get("url"),n=o.get("mode"),a=sessionStorage.getItem("sessionUrl"),l=sessionStorage.getItem("selectedMode");(r||a)&&s(r||a||""),(n||l)&&i(n||l||"remove_paywall_1")},[]);let k=async()=>{if(!o)return;let e=w.current.value;b.current.value,x.current=!0,(0,f.D)(!0),console.log("Submitted"),v.push("/result?url=".concat(o,"&mode=").concat(e)),sessionStorage.removeItem("htmlContent")};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{id:"modeSelector",style:{...p.modeSelector,...e?p.modeSelectorCollapsed:{}},className:"bg-background dark:bg-gray-800 border-t border-input dark:border-gray-700 shadow-lg",onClick:o=>{(e||"svg"===o.target.tagName.toLowerCase())&&(o.stopPropagation(),t(e=>!e))},children:[(0,r.jsx)("button",{type:"button",id:"toggleArrow",style:{...p.toggleArrow,...d?p.toggleArrowDark:{},...h?{left:"5%"}:{}},className:"bg-background dark:bg-gray-800 text-muted-foreground dark:text-gray-400 hover:text-foreground dark:hover:text-gray-200 shadow-lg border border-input",onClick:e=>{e.stopPropagation(),e.preventDefault(),t(e=>!e)},children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{...p.toggleArrowSvg,...e?p.toggleArrowSvgCollapsed:{}},children:(0,r.jsx)("polyline",{points:"18 15 12 9 6 15"})})}),(0,r.jsx)("div",{className:"form-container",style:{...p.formContainer,...e?p.formContainerHidden:{}},children:(0,r.jsxs)("div",{className:"form-group",style:{...p.formGroup,width:h?"100%":"60%"},children:[(0,r.jsx)(c,{type:"url",id:"urlInput",ref:b,placeholder:"Enter article URL...",style:{width:h?"50%":"auto",flex:h?void 0:3,minWidth:0},value:o,onChange:e=>s(e.target.value),className:"bg-background border-input focus:border-primary focus:ring-2 focus:ring-primary/30"}),(0,r.jsxs)("select",{id:"modeSelect",ref:w,className:"px-4 py-2 rounded-lg bg-background dark:bg-gray-900 border border-input dark:border-gray-800 focus:border-primary focus:ring-2 focus:ring-primary/30 focus:outline-none text-foreground dark:text-white",style:{width:h?"30%":"auto",flex:h?void 0:2,minWidth:0},value:l,onChange:e=>i(e.target.value),children:[(0,r.jsx)("option",{value:"automatic_mode",children:"Automatic Mode"}),(0,r.jsx)("option",{value:"remove_paywall_1",children:"Mode 1"}),(0,r.jsx)("option",{value:"remove_paywall_2",children:"Mode 2"})]}),(0,r.jsxs)(u,{id:"submitButton",ref:y,className:"premium-button flex items-center justify-center gap-2",style:{width:h?"20%":"auto",flex:h?void 0:1,minWidth:"fit-content",...h?{paddingLeft:"8px",paddingRight:"8px"}:{}},onClick:k,children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),(0,r.jsx)("polyline",{points:"15 3 21 3 21 9"}),(0,r.jsx)("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),(0,r.jsx)("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),(0,r.jsx)("span",{style:h?{display:"none"}:{},children:"Remove Paywall"})]})]})}),(0,r.jsx)("div",{id:"collapsedHint",className:"text-primary dark:text-primary text-sm",style:{...p.collapsedHint,...e?p.collapsedHintVisible:{}},children:"Didn't find what you are looking for? Try other modes"})]}),(0,r.jsxs)(m(),{href:"/donate",id:"buyMeCoffee",style:{...p.buyMeCoffee,...e?p.buyMeCoffeeCollapsed:{},...h&&!e?{bottom:"80px"}:{},...h&&e?{bottom:"30px"}:{}},className:"bg-primary hover:bg-primary/90 text-primary-foreground font-bold py-2 px-4 rounded-full shadow-lg transition-colors flex items-center gap-2",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{d:"M18 8h1a4 4 0 0 1 0 8h-1"}),(0,r.jsx)("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),(0,r.jsx)("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),(0,r.jsx)("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),(0,r.jsx)("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),(0,r.jsx)("span",{children:"Donate"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[95,735,441,684,358],()=>t(8551)),_N_E=e.O()}]);