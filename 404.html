<!DOCTYPE html>
<html>
<head>
  <script>
    window.onload = function () {
      var urlParams = new URLSearchParams(window.location.search);
      var encodedUrl = urlParams.get("url");
      var mode = urlParams.get("mode");

      var validModes = ["remove_paywall_1", "remove_paywall_2", "remove_paywall_3", "remove_paywall_4"];

      function isValidUrl(string) {
        try {
          new URL(string);
          return true;
        } catch (e) {
          return false;
        }
      }

      if (isValidUrl(decodeURIComponent(encodedUrl)) && validModes.includes(mode)) {
        // Store the redirection data in sessionStorage
        sessionStorage.setItem("redirectTo", `/result?url=${encodeURIComponent(encodedUrl)}&mode=${mode}`);
      }

      // Redirect to React app (index.html)
      window.location.href = "./";
    };
  </script>
</head>
<body>
</body>
</html>
